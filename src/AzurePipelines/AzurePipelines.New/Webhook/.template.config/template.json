{
  "$schema": "http://json.schemastore.org/template",
  "author": "OpenStrata",
  "classifications": [ "Common", "OpenStrata", "Webhook", "Templates", "Version Control" ],
  "identity": "OpenStrata.DevOps.AzurePipelines.Webhook",
  "name": "OpenStrata.DevOps.AzurePipelines Webhook Templates",
  "shortName": "os-azdo-wh",
  "sourceName": "OstrataTemplate.1",
  "symbols": {
    "az-devops-repo": {
      "type": "parameter",
      "datatype": "text"
    },
    "az-devops-project": {
      "type": "parameter",
      "datatype": "text"
    },
    "altSafeName": {
      "type": "generated",
      "generator": "regex",
      "dataType": "string",
      "parameters": {
        "source": "name",           
        "steps": [
          {
            "regex": "[\\.-]",         
            "replacement": "_" 
          },
          {
            "regex": "[ ]",
            "replacement": ""
          }
        ]
      }},   

    "safeRepoName": {
        "type": "generated",
        "generator": "regex",
        "dataType": "string",
        "parameters": {
          "source": "az-devops-repo",             
          "steps": [
            {
              "regex": "[\\.-]",         
              "replacement": "_" 
            },
            {
              "regex": "[ ]",
              "replacement": ""
            }
          ]
        }},
 
    "safeProjectName": {
      "type": "generated",
      "generator": "regex",
      "dataType": "string",
      "parameters": {
        "source": "az-devops-project",             
        "steps": [
          {
            "regex": "[\\.-]",         
            "replacement": "_" 
          },
          {
            "regex": "[ ]",
            "replacement": ""
          }
        ]
     }},
     "repoName": {
      "type": "generated",
      "generator": "coalesce",
      "parameters": {
        "sourceVariableName": "az-devops-repo",
        "fallbackVariableName": "name"
      },
      "replaces": "reponame.1"
     },
     "repoFallbackName": {
      "type": "generated",
      "generator": "coalesce",
      "parameters": {
        "sourceVariableName": "safeRepoName",
        "fallbackVariableName": "altSafeName"
      }
     },
    "ProjectName": {
      "type": "generated",
      "generator": "coalesce",
      "parameters": {
        "sourceVariableName": "safeProjectName",
        "fallbackVariableName": "repoFallbackName"
      },
      "replaces": "project.1"
     } 
  }

}
